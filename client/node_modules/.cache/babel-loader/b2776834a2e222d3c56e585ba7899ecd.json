{"ast":null,"code":"import _classCallCheck from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\src\\\\pages\\\\Billing.js\";\nimport React from \"react\";\nimport '../style.css';\n\nvar Billing =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Billing, _React$Component);\n\n  function Billing(props) {\n    var _this;\n\n    _classCallCheck(this, Billing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Billing).call(this, props));\n    _this.state = {\n      user: \"\",\n      userID: 0,\n      billingID: 0,\n      name: \"\",\n      CCNumber: 0,\n      exp: 0,\n      CVC: 0,\n      address: \"\",\n      date: 0,\n      hasBillingInfo: false\n    };\n    checkParams().then(function (json) {\n      _this.setState({\n        user: json.user,\n        userID: 0,\n        billingID: 0,\n        name: \"\",\n        CCNumber: 0,\n        exp: 0,\n        CVC: 0,\n        address: \"\",\n        date: 0,\n        hasBillingInfo: false,\n        censoredCCN: 0\n      });\n\n      var user = json.user;\n      var set = {};\n      getUserBilling(user).then(function (result) {\n        set = result;\n\n        if (set.hasOwnProperty(\"result\")) {\n          console.log(\"file doesnt exist!\");\n        } else {\n          // parse good response into constants for current state\n          _this.setState({\n            user: json.user,\n            userID: set.uID,\n            billingID: set.bID,\n            name: set.bName,\n            CCNumber: set.ccN,\n            exp: set.expD,\n            CVC: set.cvc,\n            address: set.bAddress,\n            date: set.bDate,\n            hasBillingInfo: set.hasBillingInfo,\n            censoredCCN: set.ccN.replace(/\\d(?=\\d{4})/g, \"*\")\n          });\n        }\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Billing, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          user = _this$state.user,\n          userID = _this$state.userID,\n          billingID = _this$state.billingID,\n          name = _this$state.name,\n          censoredCCN = _this$state.censoredCCN,\n          exp = _this$state.exp,\n          CVC = _this$state.CVC,\n          address = _this$state.address,\n          date = _this$state.date,\n          hasBillingInfo = _this$state.hasBillingInfo;\n      return React.createElement(\"div\", {\n        className: \"bg2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, hasBillingInfo ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \" \", \"Billing Information\", \" \")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Name on card: \" + name)), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Credit Card Number: \" + censoredCCN)), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Expiration Date: \" + exp)), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"CVC: \" + CVC)), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Billing Address: \" + address)), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Billing Date: \" + date + \" of every month\")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/editBilling\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"#d7e2e9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Click here to edit it!\")))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \" \", \"Billing Information\", \" \")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"red\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"You do not have any billing information in file\")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/editBilling\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"#d7e2e9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Click here to add it!\"))))));\n    }\n  }]);\n\n  return Billing;\n}(React.Component);\n\nfunction checkParams() {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    resolve({\n      user: user\n    });\n  });\n}\n\nfunction getUserBilling(user) {\n  return new Promise(function (resolve, reject) {\n    var data = '{\"user\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/getData/getUserBilling\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress) {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/updateBilling\";\n    fetch(url, transport).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      // needs to return true or false based on if registration is successful\n      // if true, return true and set username in localStorage\n      // if false, return what went wrong, if multiple things, put inside array[]\n      resolve(json);\n    });\n  });\n}\n\nexport default Billing;","map":{"version":3,"sources":["D:\\RazParent\\RazzlersGithub\\client\\src\\pages\\Billing.js"],"names":["React","Billing","props","state","user","userID","billingID","name","CCNumber","exp","CVC","address","date","hasBillingInfo","checkParams","then","json","setState","censoredCCN","set","getUserBilling","result","hasOwnProperty","console","log","uID","bID","bName","ccN","expD","cvc","bAddress","bDate","replace","Component","Promise","resolve","reject","window","localStorage","getItem","data","JSON","parse","transport","headers","method","body","stringify","url","fetch","catch","err","Error","updateBilling","inName","inCCN","inExp","inCvc","inAddress","response"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport '../style.css';\r\n\r\nclass Billing extends React.Component {\r\n  constructor(props)\r\n  {\r\n    super(props)\r\n    this.state = {\r\n\t  user: \"\",\r\n\t  userID: 0,\r\n      billingID: 0,\r\n      name: \"\",\r\n      CCNumber: 0,\r\n\t  exp: 0,\r\n      CVC: 0,\r\n      address: \"\",\r\n\t  date: 0,\r\n\t  hasBillingInfo: false\r\n    };\r\n    checkParams().then(json => {\r\n      this.setState({\r\n\t\tuser: json.user,\r\n\t\tuserID: 0,\r\n\t\tbillingID: 0,\r\n\t\tname: \"\",\r\n\t\tCCNumber: 0,\r\n\t\texp: 0,\r\n\t\tCVC: 0,\r\n\t\taddress: \"\",\r\n\t\tdate: 0,\r\n\t\thasBillingInfo: false,\r\n\t\tcensoredCCN:0\r\n      });\r\n      var user = json.user;\r\n      var set = {};\r\n      getUserBilling(user).then(result => {\r\n        set = result;\r\n        if(set.hasOwnProperty(\"result\"))\r\n        {\r\n\t\t\tconsole.log(\"file doesnt exist!\");\r\n        } else {\r\n          // parse good response into constants for current state\r\n\t\t  this.setState({\r\n\t\t\tuser: json.user,\r\n            userID: set.uID,\r\n\t\t\tbillingID: set.bID,\r\n\t\t\tname: set.bName,\r\n\t\t\tCCNumber: set.ccN,\r\n\t\t\texp: set.expD,\r\n\t\t\tCVC: set.cvc,\r\n\t\t\taddress: set.bAddress,\r\n\t\t\tdate:set.bDate,\r\n\t\t\thasBillingInfo: set.hasBillingInfo,\r\n\t\t\tcensoredCCN: set.ccN.replace(/\\d(?=\\d{4})/g, \"*\")\r\n          });\r\n        }\r\n      }); \r\n    });\r\n  }\r\n  render() {\r\n    const {user, userID, billingID, name, censoredCCN, exp, CVC, address, date, hasBillingInfo} = this.state;\r\n    return (\r\n      <div className =\"bg2\">\r\n\t\t <div>\r\n\t\t\t{hasBillingInfo ? (\r\n\t\t\t\t<div>\r\n\t\t\t\t<h2 className=\"centerText\"><font  color = \"black\" size = \"50\"> {\"Billing Information\"} </font></h2>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Name on card: \" + name}</font></p>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Credit Card Number: \" + censoredCCN}</font></p>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Expiration Date: \" + exp}</font></p>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"CVC: \" + CVC}</font></p> \r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Billing Address: \" + address}</font></p>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Billing Date: \" + date + \" of every month\"}</font></p> \r\n\t\t\t\t<p className=\"centerText\"><a href=\"/editBilling\" ><font color= \"#d7e2e9\">Click here to edit it!</font></a></p>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<div>\r\n\t\t\t\t<h2 className=\"centerText\"><font  color = \"black\" size = \"50\"> {\"Billing Information\"} </font></h2>\r\n\t\t\t\t<p className=\"centerText\"><font  color =\"red\" size = \"20px\">{\"You do not have any billing information in file\"}</font></p>\r\n\t\t\t\t<p className=\"centerText\"><a href=\"/editBilling\" ><font color= \"#d7e2e9\">Click here to add it!</font></a></p>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t\t\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction checkParams()\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n\tvar user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    resolve({user});\r\n  });\r\n}\r\n\r\nfunction getUserBilling(user)\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n    var data = '{\"user\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/getData/getUserBilling\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\n\r\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress)\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n\tvar user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/updateBilling\";\r\n    fetch(url, transport).then(response => response.json()).then(json =>\r\n      {\r\n        // needs to return true or false based on if registration is successful\r\n        // if true, return true and set username in localStorage\r\n        // if false, return what went wrong, if multiple things, put inside array[]\r\n        resolve(json);\r\n      });\r\n  });\r\n}\r\n\r\nexport default Billing"]},"metadata":{},"sourceType":"module"}