{"ast":null,"code":"import _classCallCheck from \"D:\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\RazzlersGithub\\\\client\\\\src\\\\pages\\\\EditBilling.js\";\nimport React from \"react\";\nimport '../style.css';\n\nvar Billing =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Billing, _React$Component);\n\n  function Billing(props) {\n    var _this;\n\n    _classCallCheck(this, Billing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Billing).call(this, props));\n    _this.state = {\n      user: \"\",\n      userID: 0,\n      billingID: 0,\n      name: \"\",\n      CCNumber: 0,\n      exp: 0,\n      CVC: 0,\n      address: \"\",\n      date: 0,\n      hasBillingInfo: false\n    };\n    checkParams().then(function (json) {\n      _this.setState({\n        user: json.user,\n        userID: 0,\n        billingID: 0,\n        name: \"\",\n        CCNumber: 0,\n        exp: 0,\n        CVC: 0,\n        address: \"\",\n        date: 0,\n        hasBillingInfo: false\n      });\n\n      var user = json.user;\n      var set = {};\n      getUserBilling(user).then(function (result) {\n        set = result;\n\n        if (set.hasOwnProperty(\"result\")) {\n          console.log(\"file doesnt exist!\");\n        } else {\n          // parse good response into constants for current state\n          _this.setState({\n            user: json.user,\n            userID: set.uID,\n            billingID: set.bID,\n            name: set.bName,\n            CCNumber: set.ccN,\n            exp: set.expD,\n            CVC: set.cvc,\n            address: set.bAddress,\n            date: set.bDate,\n            hasBillingInfo: set.hasBillingInfo\n          });\n        }\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Billing, [{\n    key: \"render\",\n    value: function render() {\n      var hasBillingInfo = false;\n      return React.createElement(\"div\", {\n        className: \"bg2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        hidden: \"hidden\",\n        id: \"invalidMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Username or password is invalid, please try again!\")), React.createElement(\"p\", {\n        hidden: \"hidden\",\n        id: \"blankSpacesMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Please fill out all required sections and try again!\")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Please enter your billing information\")), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        className: \"input\",\n        id: \"billingNameInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Credit Card Number\",\n        className: \"input\",\n        id: \"CCNumberInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Expiration Date\",\n        className: \"input\",\n        id: \"expirationDateInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"CVC\",\n        className: \"input\",\n        id: \"cvcInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Address\",\n        className: \"input\",\n        id: \"billingAddressInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button2\",\n        id: \"submitButton\",\n        onClick: function onClick() {\n          var hadError = false;\n\n          if (document.getElementById(\"billingNameInput\").value.trim() === \"\" || document.getElementById(\"CCNumberInput\").value.trim() === \"\" || document.getElementById(\"expirationDateInput\").value.trim() === \"\" || document.getElementById(\"cvcInput\").value.trim() === \"\" || document.getElementById(\"billingAddressInput\").value.trim() === \"\") {\n            document.getElementById(\"blankSpacesMessage\").hidden = false;\n            hadError = true;\n          } else {\n            document.getElementById(\"blankSpacesMessage\").hidden = true;\n          }\n\n          if (hadError === true) {\n            return;\n          }\n\n          if (hasBillingInfo) {\n            updateBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(function (response) {\n              if (response.result === \"true\") {\n                // Update was successful\n                window.location.href = '/billing';\n              } else {\n                // display error, reprompt for information\n                document.getElementById(\"invalidMessage\").hidden = false;\n              }\n            });\n          } else if (!hasBillingInfo) {\n            addBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(function (response) {\n              if (response.result === \"true\") {\n                // Update was successful\n                window.location.href = '/billing';\n              } else {\n                // display error, reprompt for information\n                document.getElementById(\"invalidMessage\").hidden = false;\n              }\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Submit\"));\n    }\n  }]);\n\n  return Billing;\n}(React.Component);\n\nfunction checkParams() {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    resolve({\n      user: user\n    });\n  });\n}\n\nfunction getUserBilling(user) {\n  return new Promise(function (resolve, reject) {\n    var data = '{\"user\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/getData/getUserBilling\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress) {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/updateBilling\";\n    fetch(url, transport).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      // needs to return true or false based on if registration is successful\n      // if true, return true and set username in localStorage\n      // if false, return what went wrong, if multiple things, put inside array[]\n      resolve(json);\n    });\n  });\n}\n\nfunction addBilling(inName, inCCN, inExp, inCvc, inAddress) {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/addBilling\";\n    fetch(url, transport).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      // needs to return true or false based on if registration is successful\n      // if true, return true and set username in localStorage\n      // if false, return what went wrong, if multiple things, put inside array[]\n      resolve(json);\n    });\n  });\n}\n\nexport default Billing;","map":{"version":3,"sources":["D:\\RazzlersGithub\\client\\src\\pages\\EditBilling.js"],"names":["React","Billing","props","state","user","userID","billingID","name","CCNumber","exp","CVC","address","date","hasBillingInfo","checkParams","then","json","setState","set","getUserBilling","result","hasOwnProperty","console","log","uID","bID","bName","ccN","expD","cvc","bAddress","bDate","hadError","document","getElementById","value","trim","hidden","updateBilling","response","window","location","href","addBilling","Component","Promise","resolve","reject","localStorage","getItem","data","JSON","parse","transport","headers","method","body","stringify","url","fetch","catch","err","Error","inName","inCCN","inExp","inCvc","inAddress"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,cAAP;;IAEMC,O;;;;;AACJ,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,iFAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,MAAM,EAAE,CAFG;AAGXC,MAAAA,SAAS,EAAE,CAHA;AAIXC,MAAAA,IAAI,EAAE,EAJK;AAKXC,MAAAA,QAAQ,EAAE,CALC;AAMXC,MAAAA,GAAG,EAAE,CANM;AAOXC,MAAAA,GAAG,EAAE,CAPM;AAQXC,MAAAA,OAAO,EAAE,EARE;AASXC,MAAAA,IAAI,EAAE,CATK;AAUXC,MAAAA,cAAc,EAAE;AAVL,KAAb;AAYAC,IAAAA,WAAW,GAAGC,IAAd,CAAmB,UAAAC,IAAI,EAAI;AACzB,YAAKC,QAAL,CAAc;AACZb,QAAAA,IAAI,EAAEY,IAAI,CAACZ,IADC;AAEZC,QAAAA,MAAM,EAAE,CAFI;AAGZC,QAAAA,SAAS,EAAE,CAHC;AAIZC,QAAAA,IAAI,EAAE,EAJM;AAKZC,QAAAA,QAAQ,EAAE,CALE;AAMZC,QAAAA,GAAG,EAAE,CANO;AAOZC,QAAAA,GAAG,EAAE,CAPO;AAQZC,QAAAA,OAAO,EAAE,EARG;AASZC,QAAAA,IAAI,EAAE,CATM;AAUZC,QAAAA,cAAc,EAAE;AAVJ,OAAd;;AAYA,UAAIT,IAAI,GAAGY,IAAI,CAACZ,IAAhB;AACA,UAAIc,GAAG,GAAG,EAAV;AACAC,MAAAA,cAAc,CAACf,IAAD,CAAd,CAAqBW,IAArB,CAA0B,UAAAK,MAAM,EAAI;AAClCF,QAAAA,GAAG,GAAGE,MAAN;;AACA,YAAIF,GAAG,CAACG,cAAJ,CAAmB,QAAnB,CAAJ,EAAkC;AAChCC,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,SAFD,MAEO;AACL;AACA,gBAAKN,QAAL,CAAc;AACZb,YAAAA,IAAI,EAAEY,IAAI,CAACZ,IADC;AAEZC,YAAAA,MAAM,EAAEa,GAAG,CAACM,GAFA;AAGZlB,YAAAA,SAAS,EAAEY,GAAG,CAACO,GAHH;AAIZlB,YAAAA,IAAI,EAAEW,GAAG,CAACQ,KAJE;AAKZlB,YAAAA,QAAQ,EAAEU,GAAG,CAACS,GALF;AAMZlB,YAAAA,GAAG,EAAES,GAAG,CAACU,IANG;AAOZlB,YAAAA,GAAG,EAAEQ,GAAG,CAACW,GAPG;AAQZlB,YAAAA,OAAO,EAAEO,GAAG,CAACY,QARD;AASZlB,YAAAA,IAAI,EAAEM,GAAG,CAACa,KATE;AAUZlB,YAAAA,cAAc,EAAEK,GAAG,CAACL;AAVR,WAAd;AAYD;AACF,OAnBD;AAoBD,KAnCD;AAdiB;AAkDlB;;;;6BACQ;AACP,UAAIA,cAAc,GAAG,KAArB;AACA,aAAQ;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACN;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,EAAE,EAAC,gBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8DADF,CADM,EAKN;AAAG,QAAA,MAAM,EAAC,QAAV;AAAmB,QAAA,EAAE,EAAC,oBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEADF,CALM,EASN;AAAG,QAAA,SAAS,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAM,QAAA,KAAK,EAAC,OAAZ;AAAoB,QAAA,IAAI,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiC,uCAAjC,CADF,CATM,EAaN;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,MAA/B;AAAsC,QAAA,SAAS,EAAC,OAAhD;AAAwD,QAAA,EAAE,EAAC,kBAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbM,EAcN;AAAO,QAAA,IAAI,EAAC,UAAZ;AAAuB,QAAA,WAAW,EAAC,oBAAnC;AAAwD,QAAA,SAAS,EAAC,OAAlE;AAA0E,QAAA,EAAE,EAAC,eAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAdM,EAeN;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,iBAA/B;AAAiD,QAAA,SAAS,EAAC,OAA3D;AAAmE,QAAA,EAAE,EAAC,qBAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfM,EAgBN;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,KAA/B;AAAqC,QAAA,SAAS,EAAC,OAA/C;AAAuD,QAAA,EAAE,EAAC,UAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAhBM,EAiBN;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,WAAW,EAAC,SAA/B;AAAyC,QAAA,SAAS,EAAC,OAAnD;AAA2D,QAAA,EAAE,EAAC,qBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAjBM,EAkBN;AAAQ,QAAA,SAAS,EAAC,SAAlB;AAA4B,QAAA,EAAE,EAAC,cAA/B;AAA8C,QAAA,OAAO,EAAE,mBAAM;AACzD,cAAImB,QAAQ,GAAG,KAAf;;AACA,cAAIC,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA5C,CAAkDC,IAAlD,OAA6D,EAA7D,IAAmEH,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CC,IAA/C,OAA0D,EAA7H,IAAmIH,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAA/C,CAAqDC,IAArD,OAAgE,EAAnM,IAAyMH,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAApC,CAA0CC,IAA1C,OAAqD,EAA9P,IAAoQH,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAA/C,CAAqDC,IAArD,OAAgE,EAAxU,EAA4U;AAC1UH,YAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CG,MAA9C,GAAuD,KAAvD;AACAL,YAAAA,QAAQ,GAAG,IAAX;AACD,WAHD,MAGO;AACLC,YAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CG,MAA9C,GAAuD,IAAvD;AACD;;AACD,cAAIL,QAAQ,KAAK,IAAjB,EAAuB;AACrB;AACD;;AAED,cAAInB,cAAJ,EAAoB;AAClByB,YAAAA,aAAa,CAACL,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA7C,EAAoDF,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAA7F,EAAoGF,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAAnJ,EAA0JF,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAA9L,EAAqMF,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAApP,CAAb,CAAwQpB,IAAxQ,CAA6Q,UAAAwB,QAAQ,EAAI;AACvR,kBAAIA,QAAQ,CAACnB,MAAT,KAAoB,MAAxB,EAAgC;AAC9B;AACAoB,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;AACD,eAHD,MAGO;AACL;AACAT,gBAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CG,MAA1C,GAAmD,KAAnD;AACD;AACF,aARD;AASD,WAVD,MAUO,IAAI,CAACxB,cAAL,EAAqB;AAC1B8B,YAAAA,UAAU,CAACV,QAAQ,CAACC,cAAT,CAAwB,kBAAxB,EAA4CC,KAA7C,EAAoDF,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAA7F,EAAoGF,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAAnJ,EAA0JF,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,KAA9L,EAAqMF,QAAQ,CAACC,cAAT,CAAwB,qBAAxB,EAA+CC,KAApP,CAAV,CAAqQpB,IAArQ,CAA0Q,UAAAwB,QAAQ,EAAI;AACpR,kBAAIA,QAAQ,CAACnB,MAAT,KAAoB,MAAxB,EAAgC;AAC9B;AACAoB,gBAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,UAAvB;AACD,eAHD,MAGO;AACL;AACAT,gBAAAA,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CG,MAA1C,GAAmD,KAAnD;AACD;AACF,aARD;AASD;AACF,SAjCH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAlBM,CAAR;AAqDD;;;;EA3GmBrC,KAAK,CAAC4C,S;;AA8G5B,SAAS9B,WAAT,GAAuB;AACrB,SAAO,IAAI+B,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,QAAI3C,IAAI,GAAGoC,MAAM,CAACQ,YAAP,CAAoBC,OAApB,CAA4B,mBAA5B,CAAX;AACAH,IAAAA,OAAO,CAAC;AAAC1C,MAAAA,IAAI,EAAJA;AAAD,KAAD,CAAP;AACD,GAHM,CAAP;AAID;;AAED,SAASe,cAAT,CAAwBf,IAAxB,EAA8B;AAC5B,SAAO,IAAIyC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,QAAIG,IAAI,GAAG,eAAe9C,IAAf,GAAsB,IAAjC;AACA8C,IAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;AACA,QAAIG,SAAS,GAAG;AACdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OADK;AAIdC,MAAAA,MAAM,EAAE,KAJM;AAKdC,MAAAA,IAAI,EAAEL,IAAI,CAACM,SAAL,CAAeP,IAAf;AALQ,KAAhB;AAOA,QAAMQ,GAAG,GAAG,oDAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,EAAML,SAAN,CAAL,CAAsBtC,IAAtB,CAA2B,UAAAK,MAAM;AAAA,aAAIA,MAAM,CAACJ,IAAP,EAAJ;AAAA,KAAjC,EAAoDD,IAApD,CAAyD,UAAAC,IAAI,EAAI;AAC/D8B,MAAAA,OAAO,CAAC9B,IAAD,CAAP;AACD,KAFD,EAEG4C,KAFH,CAES,UAAAC,GAAG,EAAI;AACd,YAAM,IAAIC,KAAJ,CAAUD,GAAV,CAAN;AACD,KAJD;AAKD,GAhBM,CAAP;AAiBD;;AAED,SAASvB,aAAT,CAAuByB,MAAvB,EAA+BC,KAA/B,EAAsCC,KAAtC,EAA6CC,KAA7C,EAAoDC,SAApD,EAA+D;AAC7D,SAAO,IAAItB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,QAAI3C,IAAI,GAAGoC,MAAM,CAACQ,YAAP,CAAoBC,OAApB,CAA4B,mBAA5B,CAAX;AACA,QAAIC,IAAI,GAAG,eAAea,MAAf,GAAwB,aAAxB,GAAwCC,KAAxC,GAAgD,aAAhD,GAAgEC,KAAhE,GAAwE,aAAxE,GAAwFC,KAAxF,GAAgG,iBAAhG,GAAoHC,SAApH,GAAgI,kBAAhI,GAAqJ/D,IAArJ,GAA4J,IAAvK;AACA8C,IAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;AACA,QAAIG,SAAS,GAAG;AACdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OADK;AAIdC,MAAAA,MAAM,EAAE,KAJM;AAKdC,MAAAA,IAAI,EAAEL,IAAI,CAACM,SAAL,CAAeP,IAAf;AALQ,KAAhB;AAOA,QAAMQ,GAAG,GAAG,2CAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,EAAML,SAAN,CAAL,CAAsBtC,IAAtB,CAA2B,UAAAwB,QAAQ;AAAA,aAAIA,QAAQ,CAACvB,IAAT,EAAJ;AAAA,KAAnC,EAAwDD,IAAxD,CAA6D,UAAAC,IAAI,EAAI;AACnE;AACA;AACA;AACA8B,MAAAA,OAAO,CAAC9B,IAAD,CAAP;AACD,KALD;AAMD,GAlBM,CAAP;AAmBD;;AAED,SAAS2B,UAAT,CAAoBoB,MAApB,EAA4BC,KAA5B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4D;AAC1D,SAAO,IAAItB,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C,QAAI3C,IAAI,GAAGoC,MAAM,CAACQ,YAAP,CAAoBC,OAApB,CAA4B,mBAA5B,CAAX;AACA,QAAIC,IAAI,GAAG,eAAea,MAAf,GAAwB,aAAxB,GAAwCC,KAAxC,GAAgD,aAAhD,GAAgEC,KAAhE,GAAwE,aAAxE,GAAwFC,KAAxF,GAAgG,iBAAhG,GAAoHC,SAApH,GAAgI,kBAAhI,GAAqJ/D,IAArJ,GAA4J,IAAvK;AACA8C,IAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWF,IAAX,CAAP;AACA,QAAIG,SAAS,GAAG;AACdC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OADK;AAIdC,MAAAA,MAAM,EAAE,KAJM;AAKdC,MAAAA,IAAI,EAAEL,IAAI,CAACM,SAAL,CAAeP,IAAf;AALQ,KAAhB;AAOA,QAAMQ,GAAG,GAAG,wCAAZ;AACAC,IAAAA,KAAK,CAACD,GAAD,EAAML,SAAN,CAAL,CAAsBtC,IAAtB,CAA2B,UAAAwB,QAAQ;AAAA,aAAIA,QAAQ,CAACvB,IAAT,EAAJ;AAAA,KAAnC,EAAwDD,IAAxD,CAA6D,UAAAC,IAAI,EAAI;AACnE;AACA;AACA;AACA8B,MAAAA,OAAO,CAAC9B,IAAD,CAAP;AACD,KALD;AAMD,GAlBM,CAAP;AAmBD;;AACD,eAAef,OAAf","sourcesContent":["import React from \"react\";\r\nimport '../style.css';\r\n\r\nclass Billing extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      user: \"\",\r\n      userID: 0,\r\n      billingID: 0,\r\n      name: \"\",\r\n      CCNumber: 0,\r\n      exp: 0,\r\n      CVC: 0,\r\n      address: \"\",\r\n      date: 0,\r\n      hasBillingInfo: false\r\n    };\r\n    checkParams().then(json => {\r\n      this.setState({\r\n        user: json.user,\r\n        userID: 0,\r\n        billingID: 0,\r\n        name: \"\",\r\n        CCNumber: 0,\r\n        exp: 0,\r\n        CVC: 0,\r\n        address: \"\",\r\n        date: 0,\r\n        hasBillingInfo: false\r\n      });\r\n      var user = json.user;\r\n      var set = {};\r\n      getUserBilling(user).then(result => {\r\n        set = result;\r\n        if (set.hasOwnProperty(\"result\")) {\r\n          console.log(\"file doesnt exist!\");\r\n        } else {\r\n          // parse good response into constants for current state\r\n          this.setState({\r\n            user: json.user,\r\n            userID: set.uID,\r\n            billingID: set.bID,\r\n            name: set.bName,\r\n            CCNumber: set.ccN,\r\n            exp: set.expD,\r\n            CVC: set.cvc,\r\n            address: set.bAddress,\r\n            date: set.bDate,\r\n            hasBillingInfo: set.hasBillingInfo\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n  render() {\r\n    var hasBillingInfo = false;\r\n    return (<div className=\"bg2\">\r\n      <p hidden=\"hidden\" id=\"invalidMessage\">\r\n        <font className=\"error\">Username or password is invalid, please try again!</font>\r\n      </p>\r\n\r\n      <p hidden=\"hidden\" id=\"blankSpacesMessage\">\r\n        <font className=\"error\">Please fill out all required sections and try again!</font>\r\n      </p>\r\n\r\n      <p className=\"centerText\">\r\n        <font color=\"black\" size=\"20px\">{\"Please enter your billing information\"}</font>\r\n      </p>\r\n\r\n      <input type=\"text\" placeholder=\"Name\" className=\"input\" id=\"billingNameInput\"/>\r\n      <input type=\"password\" placeholder=\"Credit Card Number\" className=\"input\" id=\"CCNumberInput\"/>\r\n      <input type=\"text\" placeholder=\"Expiration Date\" className=\"input\" id=\"expirationDateInput\"/>\r\n      <input type=\"text\" placeholder=\"CVC\" className=\"input\" id=\"cvcInput\"/>\r\n      <input type=\"text\" placeholder=\"Address\" className=\"input\" id=\"billingAddressInput\"/>\r\n      <button className=\"button2\" id=\"submitButton\" onClick={() => {\r\n          var hadError = false;\r\n          if (document.getElementById(\"billingNameInput\").value.trim() === \"\" || document.getElementById(\"CCNumberInput\").value.trim() === \"\" || document.getElementById(\"expirationDateInput\").value.trim() === \"\" || document.getElementById(\"cvcInput\").value.trim() === \"\" || document.getElementById(\"billingAddressInput\").value.trim() === \"\") {\r\n            document.getElementById(\"blankSpacesMessage\").hidden = false;\r\n            hadError = true;\r\n          } else {\r\n            document.getElementById(\"blankSpacesMessage\").hidden = true;\r\n          }\r\n          if (hadError === true) {\r\n            return;\r\n          }\r\n\r\n          if (hasBillingInfo) {\r\n            updateBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(response => {\r\n              if (response.result === \"true\") {\r\n                // Update was successful\r\n                window.location.href = '/billing';\r\n              } else {\r\n                // display error, reprompt for information\r\n                document.getElementById(\"invalidMessage\").hidden = false;\r\n              }\r\n            });\r\n          } else if (!hasBillingInfo) {\r\n            addBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(response => {\r\n              if (response.result === \"true\") {\r\n                // Update was successful\r\n                window.location.href = '/billing';\r\n              } else {\r\n                // display error, reprompt for information\r\n                document.getElementById(\"invalidMessage\").hidden = false;\r\n              }\r\n            });\r\n          }\r\n        }}>Submit</button>\r\n    </div>);\r\n  }\r\n}\r\n\r\nfunction checkParams() {\r\n  return new Promise(function(resolve, reject) {\r\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    resolve({user});\r\n  });\r\n}\r\n\r\nfunction getUserBilling(user) {\r\n  return new Promise(function(resolve, reject) {\r\n    var data = '{\"user\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/getData/getUserBilling\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\n\r\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress) {\r\n  return new Promise(function(resolve, reject) {\r\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/updateBilling\";\r\n    fetch(url, transport).then(response => response.json()).then(json => {\r\n      // needs to return true or false based on if registration is successful\r\n      // if true, return true and set username in localStorage\r\n      // if false, return what went wrong, if multiple things, put inside array[]\r\n      resolve(json);\r\n    });\r\n  });\r\n}\r\n\r\nfunction addBilling(inName, inCCN, inExp, inCvc, inAddress) {\r\n  return new Promise(function(resolve, reject) {\r\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/addBilling\";\r\n    fetch(url, transport).then(response => response.json()).then(json => {\r\n      // needs to return true or false based on if registration is successful\r\n      // if true, return true and set username in localStorage\r\n      // if false, return what went wrong, if multiple things, put inside array[]\r\n      resolve(json);\r\n    });\r\n  });\r\n}\r\nexport default Billing\r\n"]},"metadata":{},"sourceType":"module"}