{"ast":null,"code":"import _classCallCheck from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\src\\\\pages\\\\EditBilling.js\";\nimport React from \"react\";\nimport '../style.css';\n\nvar Billing =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Billing, _React$Component);\n\n  function Billing(props) {\n    var _this;\n\n    _classCallCheck(this, Billing);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Billing).call(this, props));\n    _this.state = {\n      user: \"\",\n      userID: 0,\n      billingID: 0,\n      name: \"\",\n      CCNumber: 0,\n      exp: 0,\n      CVC: 0,\n      address: \"\",\n      date: 0,\n      hasBillingInfo: false\n    };\n    checkParams().then(function (json) {\n      _this.setState({\n        user: json.user,\n        userID: 0,\n        billingID: 0,\n        name: \"\",\n        CCNumber: 0,\n        exp: 0,\n        CVC: 0,\n        address: \"\",\n        date: 0,\n        hasBillingInfo: false\n      });\n\n      var user = json.user;\n      var set = {};\n      getUserBilling(user).then(function (result) {\n        set = result;\n\n        if (set.hasOwnProperty(\"result\")) {\n          console.log(\"file doesnt exist!\");\n        } else {\n          // parse good response into constants for current state\n          _this.setState({\n            user: json.user,\n            userID: set.uID,\n            billingID: set.bID,\n            name: set.bName,\n            CCNumber: set.ccN,\n            exp: set.expD,\n            CVC: set.cvc,\n            address: set.bAddress,\n            date: set.bDate,\n            hasBillingInfo: set.hasBillingInfo\n          });\n        }\n      });\n    });\n    return _this;\n  }\n\n  _createClass(Billing, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          user = _this$state.user,\n          userID = _this$state.userID,\n          billingID = _this$state.billingID,\n          name = _this$state.name,\n          CCNumber = _this$state.CCNumber,\n          exp = _this$state.exp,\n          CVC = _this$state.CVC,\n          address = _this$state.address,\n          date = _this$state.date,\n          hasBillingInfo = _this$state.hasBillingInfo;\n      return React.createElement(\"div\", {\n        className: \"bg2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        hidden: true,\n        id: \"invalidMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \"Username or password is invalid, please try again!\")), React.createElement(\"p\", {\n        hidden: true,\n        id: \"blankSpacesMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        className: \"error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Please fill out all required sections and try again!\")), React.createElement(\"p\", {\n        className: \"centerText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"font\", {\n        color: \"black\",\n        size: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Please enter your billing information\")), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        className: \"input\",\n        id: \"billingNameInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Credit Card Number\",\n        className: \"input\",\n        id: \"CCNumberInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Expiration Date\",\n        className: \"input\",\n        id: \"expirationDateInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"CVC\",\n        className: \"input\",\n        id: \"cvcInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Address\",\n        className: \"input\",\n        id: \"billingAddressInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button2\",\n        id: \"submitButton\",\n        onClick: function onClick() {\n          var hadError = false;\n\n          if (document.getElementById(\"billingNameInput\").value.trim() === \"\" || document.getElementById(\"CCNumberInput\").value.trim() === \"\" || document.getElementById(\"expirationDateInput\").value.trim() === \"\" || document.getElementById(\"cvcInput\").value.trim() === \"\" || document.getElementById(\"billingAddressInput\").value.trim() === \"\") {\n            document.getElementById(\"blankSpacesMessage\").hidden = false;\n            hadError = true;\n          } else {\n            document.getElementById(\"blankSpacesMessage\").hidden = true;\n          }\n\n          if (hadError === true) {\n            return;\n          }\n\n          if (hasBillingInfo) {\n            updateBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(function (response) {\n              if (response.result === \"true\") {\n                // Update was successful\n                window.location.href = '/billing';\n              } else {\n                // display error, reprompt for information\n                document.getElementById(\"invalidMessage\").hidden = false;\n              }\n            });\n          } else if (!hasBillingInfo) {\n            addBilling(document.getElementById(\"billingNameInput\").value, document.getElementById(\"CCNumberInput\").value, document.getElementById(\"expirationDateInput\").value, document.getElementById(\"cvcInput\").value, document.getElementById(\"billingAddressInput\").value).then(function (response) {\n              if (response.result === \"true\") {\n                // Update was successful\n                window.location.href = '/billing';\n              } else {\n                // display error, reprompt for information\n                document.getElementById(\"invalidMessage\").hidden = false;\n              }\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Submit\"));\n    }\n  }]);\n\n  return Billing;\n}(React.Component);\n\nfunction checkParams() {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    resolve({\n      user: user\n    });\n  });\n}\n\nfunction getUserBilling(user) {\n  return new Promise(function (resolve, reject) {\n    var data = '{\"user\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://localhost:3001/api/getData/getUserBilling\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress) {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://localhost:3001/api/updateBilling\";\n    fetch(url, transport).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      // needs to return true or false based on if registration is successful\n      // if true, return true and set username in localStorage\n      // if false, return what went wrong, if multiple things, put inside array[]\n      resolve(json);\n    });\n  });\n}\n\nfunction addBilling(inName, inCCN, inExp, inCvc, inAddress) {\n  return new Promise(function (resolve, reject) {\n    var user = window.localStorage.getItem(\"Razzlers_Username\");\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://localhost.me:3001/api/addBilling\";\n    fetch(url, transport).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      // needs to return true or false based on if registration is successful\n      // if true, return true and set username in localStorage\n      // if false, return what went wrong, if multiple things, put inside array[]\n      resolve(json);\n    });\n  });\n}\n\nexport default Billing;","map":{"version":3,"sources":["D:\\RazParent\\RazzlersGithub\\client\\src\\pages\\EditBilling.js"],"names":["React","Billing","props","state","user","userID","billingID","name","CCNumber","exp","CVC","address","date","hasBillingInfo","checkParams","then","json","setState","set","getUserBilling","result","hasOwnProperty","console","log","uID","bID","bName","ccN","expD","cvc","bAddress","bDate","hadError","document","getElementById","value","trim","hidden","updateBilling","response","window","location","href","addBilling","Component","Promise","resolve","reject","localStorage","getItem","data","JSON","parse","transport","headers","method","body","stringify","url","fetch","catch","err","Error","inName","inCCN","inExp","inCvc","inAddress"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport '../style.css';\r\n\r\nclass Billing extends React.Component {\r\n  constructor(props)\r\n  {\r\n    super(props)\r\n    this.state = {\r\n\t  user: \"\",\r\n\t  userID: 0,\r\n      billingID: 0,\r\n      name: \"\",\r\n      CCNumber: 0,\r\n\t  exp: 0,\r\n      CVC: 0,\r\n      address: \"\",\r\n\t  date: 0,\r\n\t  hasBillingInfo: false\r\n    };\r\n    checkParams().then(json => {\r\n      this.setState({\r\n\t\tuser: json.user,\r\n\t\tuserID: 0,\r\n\t\tbillingID: 0,\r\n\t\tname: \"\",\r\n\t\tCCNumber: 0,\r\n\t\texp: 0,\r\n\t\tCVC: 0,\r\n\t\taddress: \"\",\r\n\t\tdate: 0,\r\n\t\thasBillingInfo: false\r\n      });\r\n      var user = json.user;\r\n      var set = {};\r\n      getUserBilling(user).then(result => {\r\n        set = result;\r\n        if(set.hasOwnProperty(\"result\"))\r\n        {\r\n\t\t\tconsole.log(\"file doesnt exist!\");\r\n        } else {\r\n          // parse good response into constants for current state\r\n\t\t  this.setState({\r\n\t\t\tuser: json.user,\r\n            userID: set.uID,\r\n\t\t\tbillingID: set.bID,\r\n\t\t\tname: set.bName,\r\n\t\t\tCCNumber: set.ccN,\r\n\t\t\texp: set.expD,\r\n\t\t\tCVC: set.cvc,\r\n\t\t\taddress: set.bAddress,\r\n\t\t\tdate:set.bDate,\r\n\t\t\thasBillingInfo: set.hasBillingInfo\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n  render() {\r\n    const {user, userID, billingID, name, CCNumber, exp, CVC, address, date, hasBillingInfo} = this.state;\r\n    return (\r\n      <div className =\"bg2\">\r\n\t\t<p hidden id=\"invalidMessage\">\r\n          <font className=\"error\">Username or password is invalid, please try again!</font>\r\n        </p>\r\n\r\n\t\t<p hidden id=\"blankSpacesMessage\">\r\n          <font className=\"error\">Please fill out all required sections and try again!</font>\r\n        </p>\r\n\r\n\t\t<p className=\"centerText\"><font  color =\"black\" size = \"20px\">{\"Please enter your billing information\"}</font></p>\r\n\r\n\t\t<input\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          className=\"input\"\r\n          id=\"billingNameInput\"/>\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Credit Card Number\"\r\n          className=\"input\"\r\n          id=\"CCNumberInput\"/>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Expiration Date\"\r\n          className=\"input\"\r\n          id=\"expirationDateInput\"/>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"CVC\"\r\n\t\t  className=\"input\"\r\n          id=\"cvcInput\"/>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Address\"\r\n          className=\"input\"\r\n          id=\"billingAddressInput\"/>\r\n        <button className=\"button2\" id=\"submitButton\" onClick={() =>\r\n          {\r\n            var hadError = false;\r\n            if(document.getElementById(\"billingNameInput\").value.trim() === \"\" || document.getElementById(\"CCNumberInput\").value.trim() === \"\" ||\r\n                document.getElementById(\"expirationDateInput\").value.trim() === \"\" || document.getElementById(\"cvcInput\").value.trim() === \"\" ||\r\n                document.getElementById(\"billingAddressInput\").value.trim() === \"\")\r\n            {\r\n              document.getElementById(\"blankSpacesMessage\").hidden=false;\r\n              hadError = true;\r\n            } else {\r\n              document.getElementById(\"blankSpacesMessage\").hidden=true;\r\n            }\r\n            if(hadError === true)\r\n            {\r\n              return;\r\n            }\r\n\r\n\t\t\tif(hasBillingInfo){\r\n\t\t\t\tupdateBilling(document.getElementById(\"billingNameInput\").value,\r\n\t\t\t\tdocument.getElementById(\"CCNumberInput\").value,\r\n\t\t\t\tdocument.getElementById(\"expirationDateInput\").value,\r\n\t\t\t\tdocument.getElementById(\"cvcInput\").value,\r\n\t\t\t\tdocument.getElementById(\"billingAddressInput\").value).then(response => {\r\n               if(response.result === \"true\")\r\n               {\r\n                 // Update was successful\r\n                 window.location.href='/billing';\r\n               } else {\r\n                 // display error, reprompt for information\r\n                 document.getElementById(\"invalidMessage\").hidden=false;\r\n               }\r\n             });\r\n\t\t\t}\r\n\r\n\t\t\telse if (!hasBillingInfo) {\r\n\t\t\t\taddBilling(document.getElementById(\"billingNameInput\").value,\r\n\t\t\t\tdocument.getElementById(\"CCNumberInput\").value,\r\n\t\t\t\tdocument.getElementById(\"expirationDateInput\").value,\r\n\t\t\t\tdocument.getElementById(\"cvcInput\").value,\r\n\t\t\t\tdocument.getElementById(\"billingAddressInput\").value).then(response => {\r\n               if(response.result === \"true\")\r\n               {\r\n                 // Update was successful\r\n                 window.location.href='/billing';\r\n               } else {\r\n                 // display error, reprompt for information\r\n                 document.getElementById(\"invalidMessage\").hidden=false;\r\n               }\r\n             });\r\n\t\t\t}\r\n          }}>Submit</button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nfunction checkParams()\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n\tvar user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    resolve({user});\r\n  });\r\n}\r\n\r\nfunction getUserBilling(user)\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n    var data = '{\"user\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://localhost:3001/api/getData/getUserBilling\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\n\r\nfunction updateBilling(inName, inCCN, inExp, inCvc, inAddress)\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n\tvar user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://localhost:3001/api/updateBilling\";\r\n    fetch(url, transport).then(response => response.json()).then(json =>\r\n      {\r\n        // needs to return true or false based on if registration is successful\r\n        // if true, return true and set username in localStorage\r\n        // if false, return what went wrong, if multiple things, put inside array[]\r\n        resolve(json);\r\n      });\r\n  });\r\n}\r\n\r\nfunction addBilling(inName, inCCN, inExp, inCvc, inAddress)\r\n{\r\n  return new Promise(function(resolve, reject)\r\n  {\r\n\tvar user = window.localStorage.getItem(\"Razzlers_Username\");\r\n    var data = '{\"name\": \"' + inName + '\", \"ccn\": \"' + inCCN + '\", \"exp\": \"' + inExp + '\", \"cvc\": \"' + inCvc + '\", \"address\": \"' + inAddress + '\", \"username\": \"' + user + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://localhost.me:3001/api/addBilling\";\r\n    fetch(url, transport).then(response => response.json()).then(json =>\r\n      {\r\n        // needs to return true or false based on if registration is successful\r\n        // if true, return true and set username in localStorage\r\n        // if false, return what went wrong, if multiple things, put inside array[]\r\n        resolve(json);\r\n      });\r\n  });\r\n}\r\nexport default Billing\r\n"]},"metadata":{},"sourceType":"module"}