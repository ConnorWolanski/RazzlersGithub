{"ast":null,"code":"import _classCallCheck from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\RazParent\\\\RazzlersGithub\\\\client\\\\src\\\\HTMLComponents\\\\Footer.js\";\nimport React from \"react\";\nimport '../style.css';\nimport envelope from '../images/envelope.png';\nimport Friends from '../images/friends.png';\nimport close from '../images/close.png';\nimport addfriend from '../images/add-friend.png';\nimport FriendsList from './FriendsList.js';\n\nvar utilFunc = require('../Helpers/UtilityFunctions');\n\nvar fList = null;\nvar iList = null;\n\nvar Footer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Footer, _React$Component);\n\n  function Footer(props) {\n    var _this;\n\n    _classCallCheck(this, Footer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Footer).call(this, props));\n    _this.state = {\n      friends: null,\n      IDs: null,\n      users: null,\n      ids: null\n    };\n    var username = window.localStorage.getItem(\"Razzlers_Username\");\n\n    if (username !== null) {\n      utilFunc.getUsersFriends(username).then(function (friendsList) {\n        _this.setState({\n          friends: friendsList.friends,\n          IDs: friendsList.IDs,\n          users: friendsList.friends,\n          ids: friendsList.IDs\n        });\n\n        fList = friendsList.friends;\n        iList = friendsList.IDs;\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(Footer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      setTimeout(function () {\n        updateMessages();\n      }, 1000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          friends = _this$state.friends,\n          IDs = _this$state.IDs,\n          users = _this$state.users,\n          ids = _this$state.ids;\n\n      if (Array.isArray(friends)) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"footerMenu\",\n          hidden: true,\n          id: \"friends\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"menuTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          color: \"white\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, \"Friends\"), React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            return document.getElementById(\"friends\").hidden = true;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: close,\n          alt: \"close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            document.getElementById(\"friends\").hidden = true;\n            document.getElementById(\"addFriends\").hidden = false;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: addfriend,\n          alt: \"add friends\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"autoFlow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(FriendsList, {\n          friends: friends,\n          IDs: IDs,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"footerMenu\",\n          hidden: true,\n          id: \"addFriends\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"menuTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          color: \"white\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, \"Add Friends\"), React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            return document.getElementById(\"addFriends\").hidden = true;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: close,\n          alt: \"close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }))), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"userSearch\",\n          placeholder: \"Search Users\",\n          id: \"search1\",\n          onChange: function onChange() {\n            return searchUsers(document.getElementById(\"search1\").value).then(function (userlist) {\n              users = userlist.users.users;\n              ids = userlist.users.IDs;\n\n              _this2.setState({\n                users: users,\n                ids: ids\n              });\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          id: \"dhold\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(FriendsList, {\n          friends: users,\n          IDs: ids,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"footerMenu\",\n          hidden: true,\n          id: \"messages\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"menuTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          color: \"white\",\n          id: \"messageTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, window.localStorage.getItem(\"Razzlers_Username\")), React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            return document.getElementById(\"messages\").hidden = true;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: close,\n          alt: \"close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"messageBubble\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          id: \"textMessages\",\n          color: \"white\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, \"hello this is a message from the devolpers\")), React.createElement(\"form\", {\n          className: \"typeMessage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          id: \"messageTyped\",\n          className: \"messageText\",\n          placeholder: \"text message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"button\",\n          className: \"sendButton\",\n          onClick: function onClick() {\n            sendMessage(document.getElementById(\"messageTitle\").innerHTML, document.getElementById(\"messageTyped\").value).then(function (result) {\n              getUsersMessages(window.localStorage.getItem(\"Razzlers_Username\"), document.getElementById(\"messageTitle\").innerHTML).then(function (json) {\n                var messages = \"\";\n                json.messages.forEach(function (message) {\n                  messages += message.user_id + \" => \" + message.recipient_user_id + \": \" + message.message_body + \"<br>\";\n                });\n                document.getElementById(\"textMessages\").innerHTML = messages;\n              });\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Send\"))), React.createElement(\"div\", {\n          className: \"footer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            document.getElementById(\"friends\").hidden = !document.getElementById(\"friends\").hidden;\n            document.getElementById(\"messages\").hidden = true;\n            document.getElementById(\"addFriends\").hidden = true;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: Friends,\n          alt: \"friends\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"iconButton\",\n          onClick: function onClick() {\n            document.getElementById(\"messages\").hidden = !document.getElementById(\"messages\").hidden;\n            document.getElementById(\"friends\").hidden = true;\n            document.getElementById(\"addFriends\").hidden = true;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: envelope,\n          alt: \"envelope\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }))));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Footer;\n}(React.Component);\n\nfunction updateMessages() {\n  //console.log(fList + \" : \" + iList);\n  var sender = window.localStorage.getItem(\"Razzlers_Username\");\n  var recip = document.getElementById(\"messageTitle\");\n\n  if (sender !== recip) {\n    getUsersMessages(sender, recip).then(function (result) {\n      console.log(result);\n    });\n  }\n\n  setTimeout(function () {\n    updateMessages();\n  }, 1000);\n}\n\nfunction sendMessage(recipient, messageText) {\n  return new Promise(function (resolve, reject) {\n    var data = '{\"sender\": \"' + window.localStorage.getItem(\"Razzlers_Username\") + '\", \"recipient\": \"' + recipient + '\", \"message\": \"' + messageText + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/sendMessage\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction getUsersMessages(sender, recipient) {\n  return new Promise(function (resolve, reject) {\n    var data = '{\"sender\": \"' + sender + '\", \"recipient\": \"' + recipient + '\"}';\n    data = JSON.parse(data);\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"PUT\",\n      body: JSON.stringify(data)\n    };\n    var url = \"http://razzlers.me:3001/api/getData/getUsersMessages\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction getUserList() {\n  return new Promise(function (resolve, reject) {\n    var transport = {\n      headers: {\n        'Content-Type': \"application/json\"\n      },\n      method: \"GET\"\n    };\n    var url = \"http://razzlers.me:3001/api/getData/getUserList\";\n    fetch(url, transport).then(function (result) {\n      return result.json();\n    }).then(function (json) {\n      resolve(json);\n    }).catch(function (err) {\n      throw new Error(err);\n    });\n  });\n}\n\nfunction searchUsers(search) {\n  return new Promise(function (resolve, reject) {\n    getUserList().then(function (users) {\n      var s = search.toLowerCase();\n\n      for (var i = users.users.length - 1; i >= 0; i--) {\n        if (!users.users[i].toLowerCase().includes(s)) {\n          users.users.splice(i, 1);\n          users.IDs.splice(i, 1);\n        }\n      }\n\n      resolve({\n        users: users\n      });\n    });\n  });\n}\n\nexport default Footer;","map":{"version":3,"sources":["D:\\RazParent\\RazzlersGithub\\client\\src\\HTMLComponents\\Footer.js"],"names":["React","envelope","Friends","close","addfriend","FriendsList","utilFunc","require","fList","iList","Footer","props","state","friends","IDs","users","ids","username","window","localStorage","getItem","getUsersFriends","then","friendsList","setState","setTimeout","updateMessages","Array","isArray","document","getElementById","hidden","searchUsers","value","userlist","sendMessage","innerHTML","result","getUsersMessages","json","messages","forEach","message","user_id","recipient_user_id","message_body","Component","sender","recip","console","log","recipient","messageText","Promise","resolve","reject","data","JSON","parse","transport","headers","method","body","stringify","url","fetch","catch","err","Error","getUserList","search","s","toLowerCase","i","length","includes","splice"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport '../style.css';\r\nimport envelope from '../images/envelope.png';\r\nimport Friends from '../images/friends.png';\r\nimport close from '../images/close.png';\r\nimport addfriend from '../images/add-friend.png';\r\nimport FriendsList from './FriendsList.js';\r\nconst utilFunc = require('../Helpers/UtilityFunctions');\r\n\r\nvar fList = null;\r\nvar iList = null;\r\n\r\nclass Footer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      friends: null,\r\n      IDs: null,\r\n      users: null,\r\n      ids: null\r\n    };\r\n    var username = window.localStorage.getItem(\"Razzlers_Username\");\r\n\r\n    if (username !== null) {\r\n      utilFunc.getUsersFriends(username).then(friendsList => {\r\n        this.setState({friends: friendsList.friends, IDs: friendsList.IDs, users: friendsList.friends, ids: friendsList.IDs});\r\n        fList = friendsList.friends;\r\n        iList = friendsList.IDs;\r\n      });\r\n    }\r\n  }\r\n  componentDidMount()\r\n  {\r\n    setTimeout(function()\r\n    {\r\n      updateMessages();\r\n    }, 1000);\r\n  }\r\n  render() {\r\n    var {friends, IDs, users, ids} = this.state;\r\n    if (Array.isArray(friends)) {\r\n      return (<div>\r\n\r\n        <div className=\"footerMenu\" hidden={true} id=\"friends\">\r\n          <h1 className=\"menuTitle\">\r\n            <font color=\"white\">Friends</font>\r\n            <button className=\"iconButton\" onClick={() => document.getElementById(\"friends\").hidden = true}>\r\n              <img src={close} alt=\"close\"/>\r\n            </button>\r\n            <button className=\"iconButton\" onClick={() => {\r\n                document.getElementById(\"friends\").hidden = true;\r\n                document.getElementById(\"addFriends\").hidden = false;\r\n              }}>\r\n              <img src={addfriend} alt=\"add friends\"/>\r\n            </button>\r\n          </h1>\r\n          <div className=\"autoFlow\">\r\n            <FriendsList friends={friends} IDs={IDs}/>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div className=\"footerMenu\" hidden={true} id=\"addFriends\">\r\n          <h1 className=\"menuTitle\">\r\n            <font color=\"white\">Add Friends</font>\r\n            <button className=\"iconButton\" onClick={() => document.getElementById(\"addFriends\").hidden = true}>\r\n              <img src={close} alt=\"close\"/>\r\n            </button>\r\n          </h1>\r\n          <input type=\"text\" className=\"userSearch\" placeholder=\"Search Users\" id=\"search1\" onChange={()=>\r\n              searchUsers(document.getElementById(\"search1\").value).then(userlist => {\r\n                users = userlist.users.users;\r\n                ids = userlist.users.IDs;\r\n                this.setState({users:users, ids: ids});\r\n              })}/>\r\n            <div id=\"dhold\">\r\n              <FriendsList friends={users} IDs={ids}></FriendsList>\r\n            </div>\r\n        </div>\r\n        <div className=\"footerMenu\" hidden={true} id=\"messages\">\r\n          <h1 className=\"menuTitle\">\r\n            <font color=\"white\" id =\"messageTitle\">{window.localStorage.getItem(\"Razzlers_Username\")}</font>\r\n            <button className=\"iconButton\" onClick={() => document.getElementById(\"messages\").hidden = true}>\r\n              <img src={close} alt=\"close\"/>\r\n            </button>\r\n          </h1>\r\n          <div className=\"messageBubble\">\r\n            <font id=\"textMessages\" color=\"white\">hello this is a message from the devolpers</font>\r\n          </div>\r\n          <form className=\"typeMessage\">\r\n            <input type=\"text\" id=\"messageTyped\" className=\"messageText\" placeholder=\"text message\"/>\r\n            <button type=\"button\" className=\"sendButton\" onClick={() => {\r\n                sendMessage(document.getElementById(\"messageTitle\").innerHTML, document.getElementById(\"messageTyped\").value).then(result => {\r\n                  getUsersMessages(window.localStorage.getItem(\"Razzlers_Username\"), document.getElementById(\"messageTitle\").innerHTML).then(json => {\r\n                    var messages = \"\";\r\n                    json.messages.forEach(function(message)\r\n                    {\r\n                      messages += message.user_id + \" => \" + message.recipient_user_id + \": \" + message.message_body + \"<br>\";\r\n                    });\r\n                    document.getElementById(\"textMessages\").innerHTML = messages;\r\n                  });\r\n                });\r\n              }}>Send</button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"footer\">\r\n          <button className=\"iconButton\" onClick={() => {\r\n              document.getElementById(\"friends\").hidden = !document.getElementById(\"friends\").hidden;\r\n              document.getElementById(\"messages\").hidden = true;\r\n              document.getElementById(\"addFriends\").hidden = true;\r\n            }}>\r\n            <img src={Friends} alt=\"friends\"/>\r\n          </button>\r\n          <button className=\"iconButton\" onClick={() => {\r\n              document.getElementById(\"messages\").hidden = !document.getElementById(\"messages\").hidden;\r\n              document.getElementById(\"friends\").hidden = true;\r\n              document.getElementById(\"addFriends\").hidden = true;\r\n            }}>\r\n            <img src={envelope} alt=\"envelope\"/>\r\n          </button>\r\n        </div>\r\n\r\n      </div>);\r\n    }\r\n    return (<div></div>)\r\n  }\r\n}\r\n\r\nfunction updateMessages()\r\n{\r\n  //console.log(fList + \" : \" + iList);\r\n  var sender = window.localStorage.getItem(\"Razzlers_Username\");\r\n  var recip = document.getElementById(\"messageTitle\")\r\n  if(sender !== recip)\r\n  {\r\n    getUsersMessages(sender, recip).then(result => {\r\n      console.log(result);\r\n    });\r\n  }\r\n\r\n\r\n  setTimeout(function()\r\n  {\r\n   updateMessages();\r\n  }, 1000);\r\n}\r\n\r\nfunction sendMessage(recipient, messageText)\r\n{\r\n  return new Promise(function(resolve, reject) {\r\n    var data = '{\"sender\": \"' + window.localStorage.getItem(\"Razzlers_Username\") + '\", \"recipient\": \"' + recipient + '\", \"message\": \"' + messageText + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/sendMessage\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\n\r\nfunction getUsersMessages(sender, recipient) {\r\n  return new Promise(function(resolve, reject) {\r\n    var data = '{\"sender\": \"' + sender + '\", \"recipient\": \"' + recipient + '\"}';\r\n    data = JSON.parse(data);\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data)\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/getData/getUsersMessages\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\n\r\nfunction getUserList() {\r\n  return new Promise(function(resolve, reject) {\r\n    var transport = {\r\n      headers: {\r\n        'Content-Type': \"application/json\"\r\n      },\r\n      method: \"GET\"\r\n    };\r\n    const url = \"http://razzlers.me:3001/api/getData/getUserList\";\r\n    fetch(url, transport).then(result => result.json()).then(json => {\r\n      resolve(json);\r\n    }).catch(err => {\r\n      throw new Error(err);\r\n    });\r\n  });\r\n}\r\nfunction searchUsers(search) {\r\n  return new Promise(function(resolve, reject) {\r\n    getUserList().then(users => {\r\n    var s = search.toLowerCase();\r\n    for (var i = users.users.length - 1; i >= 0; i--) {\r\n      if (!users.users[i].toLowerCase().includes(s)) {\r\n        users.users.splice(i, 1);\r\n        users.IDs.splice(i, 1);\r\n      }\r\n    }\r\n    resolve({users});})\r\n  });\r\n}\r\n\r\nexport default Footer\r\n"]},"metadata":{},"sourceType":"module"}